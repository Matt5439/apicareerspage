<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Application</title>
</head>
<body>
    <h1 id="job-title">Apply for the Job</h1>
    <div id="job-description"></div>
    <form id="job-application-form">
        <label for="first_name">First Name:</label>
        <input type="text" id="first_name" name="first_name" required><br>

        <label for="last_name">Last Name:</label>
        <input type="text" id="last_name" name="last_name" required><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br>

        <button type="submit">Submit</button>
    </form>

    <script>
        const boardToken = 'secondeexternaldemomatt'; // Replace with your actual board token
        const jobId = new URLSearchParams(window.location.search).get('gh_jid');
        const apiUrl = `https://boards-api.greenhouse.io/v1/boards/${boardToken}/jobs/${jobId}`;

        async function fetchJobDetails() {
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                console.log('Fetched Job Details:', data); // Debugging step
                displayJobDetails(data);
            } catch (error) {
                console.error('Error fetching job details:', error);
            }
        }

        function displayJobDetails(job) {
            const jobTitle = document.getElementById('job-title');
            const jobDescription = document.getElementById('job-description');

            jobTitle.textContent = job.title;

            // Create a temporary element to parse HTML content
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = job.content;

            // Append parsed content to the jobDescription div
            while (tempDiv.firstChild) {
                jobDescription.appendChild(tempDiv.firstChild);
            }

            console.log('Job Content:', job.content); // Debugging step to check content
        }

        // Fetch job details on page load
        window.onload = fetchJobDetails;
    </script>
</body>
</html>
